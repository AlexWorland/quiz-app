============================= test session starts ==============================
platform darwin -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- /Users/aworland/quiz-app/backend-python/venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/aworland/quiz-app/backend-python
configfile: pyproject.toml
plugins: anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 97 items

tests/test_answer_timeout.py::test_answer_accepted_within_time_limit PASSED [  1%]
tests/test_answer_timeout.py::test_answer_rejected_after_timeout PASSED  [  2%]
tests/test_answer_timeout.py::test_answer_at_exact_timeout_boundary PASSED [  3%]
tests/test_answer_timeout.py::test_answer_just_before_timeout PASSED     [  4%]
tests/test_answer_timeout.py::test_duplicate_answer_still_rejected PASSED [  5%]
tests/test_answer_timeout.py::test_no_active_question_rejected PASSED    [  6%]
tests/test_answer_timeout.py::test_multiple_users_within_time_limit PASSED [  7%]
tests/test_answer_timeout.py::test_mixed_timing_submissions PASSED       [  8%]
tests/test_answer_timeout.py::test_different_time_limits PASSED          [  9%]
tests/test_answer_timeout.py::test_answer_timing_with_timezone_aware_datetime PASSED [ 10%]
tests/test_auth.py::test_register_user PASSED                            [ 11%]
tests/test_auth.py::test_register_missing_fields PASSED                  [ 12%]
tests/test_auth.py::test_login_missing_fields PASSED                     [ 13%]
tests/test_auth.py::test_get_me_unauthorized PASSED                      [ 14%]
tests/test_duplicate_names.py::test_first_participant_keeps_original_name PASSED [ 15%]
tests/test_duplicate_names.py::test_duplicate_name_gets_number_2 PASSED  [ 16%]
tests/test_duplicate_names.py::test_multiple_duplicates_increment_correctly PASSED [ 17%]
tests/test_duplicate_names.py::test_whitespace_trimmed_before_duplicate_check PASSED [ 18%]
tests/test_duplicate_names.py::test_rejoining_participant_keeps_original_name PASSED [ 19%]
tests/test_duplicate_names.py::test_case_sensitive_duplicate_check PASSED [ 20%]
tests/test_duplicate_names.py::test_special_characters_in_names PASSED   [ 21%]
tests/test_events.py::test_list_events_unauthorized PASSED               [ 22%]
tests/test_events.py::test_create_event PASSED                           [ 23%]
tests/test_events.py::test_list_events PASSED                            [ 24%]
tests/test_events.py::test_join_event_by_code PASSED                     [ 25%]
tests/test_events.py::test_join_event_invalid_code PASSED                [ 26%]
tests/test_export.py::test_export_event_data_structure PASSED            [ 27%]
tests/test_export.py::test_export_event_metadata PASSED                  [ 28%]
tests/test_export.py::test_export_segments_with_questions PASSED         [ 29%]
tests/test_export.py::test_export_participants_data PASSED               [ 30%]
tests/test_export.py::test_export_leaderboard_sorted PASSED              [ 31%]
tests/test_export.py::test_export_marks_late_joiners PASSED              [ 32%]
tests/test_export.py::test_export_nonexistent_event PASSED               [ 34%]
tests/test_export.py::test_export_empty_event PASSED                     [ 35%]
tests/test_export.py::test_export_to_json_format PASSED                  [ 36%]
tests/test_export.py::test_export_to_csv_format PASSED                   [ 37%]
tests/test_export.py::test_export_to_csv_empty_leaderboard PASSED        [ 38%]
tests/test_export.py::test_export_to_json_preserves_structure PASSED     [ 39%]
tests/test_health.py::test_health_check PASSED                           [ 40%]
tests/test_join.py::test_join_event_success PASSED                       [ 41%]
tests/test_join.py::test_join_event_rejoin_same_device PASSED            [ 42%]
tests/test_join.py::test_device_enforcement_blocks_multiple_events PASSED [ 43%]
tests/test_join.py::test_device_enforcement_allows_finished_events PASSED [ 44%]
tests/test_join.py::test_join_event_not_found PASSED                     [ 45%]
tests/test_join.py::test_join_locked_event PASSED                        [ 46%]
tests/test_join.py::test_unique_display_name_generation PASSED           [ 47%]
tests/test_late_join_and_completion.py::test_record_answer_blocks_late_join PASSED [ 48%]
tests/test_late_join_and_completion.py::test_event_complete_emitted_when_all_segments_done PASSED [ 49%]
tests/test_mega_quiz.py::test_aggregate_questions_from_multiple_segments PASSED [ 50%]
tests/test_mega_quiz.py::test_aggregate_questions_respects_max_limit PASSED [ 51%]
tests/test_mega_quiz.py::test_aggregate_questions_shuffles_results PASSED [ 52%]
tests/test_mega_quiz.py::test_aggregate_questions_empty_event PASSED     [ 53%]
tests/test_mega_quiz.py::test_aggregate_questions_segments_without_questions PASSED [ 54%]
tests/test_mega_quiz.py::test_count_event_questions PASSED               [ 55%]
tests/test_mega_quiz.py::test_count_event_questions_empty PASSED         [ 56%]
tests/test_mega_quiz.py::test_aggregate_questions_from_single_segment PASSED [ 57%]
tests/test_mega_quiz.py::test_aggregate_questions_preserves_question_data PASSED [ 58%]
tests/test_mega_quiz.py::test_aggregate_questions_max_exceeds_available PASSED [ 59%]
tests/test_mega_quiz.py::test_get_mega_quiz_metadata_counts_segments_and_questions PASSED [ 60%]
tests/test_mega_quiz.py::test_should_emit_mega_quiz_ready_rules PASSED   [ 61%]
tests/test_mega_quiz_messages.py::test_start_mega_quiz_message_with_count PASSED [ 62%]
tests/test_mega_quiz_messages.py::test_start_mega_quiz_message_without_count PASSED [ 63%]
tests/test_mega_quiz_messages.py::test_skip_mega_quiz_message PASSED     [ 64%]
tests/test_mega_quiz_messages.py::test_mega_quiz_ready_message PASSED    [ 65%]
tests/test_mega_quiz_messages.py::test_mega_quiz_started_message PASSED  [ 67%]
tests/test_mega_quiz_messages.py::test_mega_quiz_ready_message_serialization PASSED [ 68%]
tests/test_mega_quiz_messages.py::test_mega_quiz_started_message_serialization PASSED [ 69%]
tests/test_mega_quiz_messages.py::test_mega_quiz_ready_single_segment_fields PASSED [ 70%]
tests/test_mega_quiz_messages.py::test_start_mega_quiz_with_zero_count PASSED [ 71%]
tests/test_mega_quiz_messages.py::test_start_mega_quiz_with_large_count PASSED [ 72%]
tests/test_mega_quiz_messages.py::test_mega_quiz_ready_with_empty_leaderboard PASSED [ 73%]
tests/test_mega_quiz_messages.py::test_mega_quiz_messages_in_parser PASSED [ 74%]
tests/test_presenter_pause.py::test_record_answer_rejected_when_presenter_paused PASSED [ 75%]
tests/test_presenter_pause.py::test_pause_flag_can_be_cleared_for_resume PASSED [ 76%]
tests/test_presenter_rotation.py::test_pass_presenter_success PASSED     [ 77%]
tests/test_presenter_rotation.py::test_pass_presenter_authorization PASSED [ 78%]
tests/test_presenter_rotation.py::test_presenter_disconnect_detection PASSED [ 79%]
tests/test_presenter_rotation.py::test_resume_segment_with_no_participants PASSED [ 80%]
tests/test_presenter_rotation.py::test_resume_segment_with_participants PASSED [ 81%]
tests/test_presenter_rotation.py::test_rapid_resume_prevention PASSED    [ 82%]
tests/test_presenter_rotation.py::test_display_name_uniqueness PASSED    [ 83%]
tests/test_resume_functionality.py::test_complete_segment_stores_previous_status PASSED [ 84%]
tests/test_resume_functionality.py::test_resume_segment_restores_previous_status PASSED [ 85%]
tests/test_resume_functionality.py::test_clear_resume_state_keeps_segment_completed PASSED [ 86%]
tests/test_resume_functionality.py::test_complete_event_stores_previous_status PASSED [ 87%]
tests/test_resume_functionality.py::test_resume_event_restores_previous_status PASSED [ 88%]
tests/test_resume_functionality.py::test_multiple_rapid_resume_attempts_prevented PASSED [ 89%]
tests/test_resume_functionality.py::test_resume_different_statuses PASSED [ 90%]
tests/test_resume_functionality.py::test_ended_at_timestamp_recorded PASSED [ 91%]
tests/test_scoring.py::test_apply_score_updates_totals PASSED            [ 92%]
tests/test_scoring.py::test_zero_fill_marks_waiting_and_is_idempotent PASSED [ 93%]
tests/test_scoring.py::test_leaderboard_orders_by_score_then_time PASSED [ 94%]
tests/test_transcription.py::test_whisper_transcribe_success PASSED      [ 95%]
tests/test_transcription.py::test_whisper_empty_audio_fails PASSED       [ 96%]
tests/test_transcription.py::test_whisper_sets_correct_parameters PASSED [ 97%]
tests/test_ws_host_controls.py::test_can_control_segment_allows_host_or_presenter PASSED [ 98%]
tests/test_ws_host_controls.py::test_build_question_payload_has_expected_shape PASSED [100%]

=============================== warnings summary ===============================
tests/test_auth.py::test_register_user
  /Users/aworland/quiz-app/backend-python/venv/lib/python3.14/site-packages/passlib/handlers/argon2.py:716: DeprecationWarning: Accessing argon2.__version__ is deprecated and will be removed in a future release. Use importlib.metadata directly to query for argon2-cffi's packaging metadata.
    _argon2_cffi.__version__, max_version)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 97 passed, 1 warning in 28.59s ========================
